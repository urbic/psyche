#!/usr/bin/psylla

< /state < /memo array > > begin
/fibonacci
{
	//state begin dict begin
		/n exch def
		memo n known
		{
			memo n get
		}
		{
			memo n 1 add setlength
			n 1 le
			{ n }
			{
				n 1 sub dup 1 sub
				fibonacci
				exch
				fibonacci
				add
			}
			ifelse
			dup memo n 3 -1 roll put
		}
		ifelse
	end end
}
bind
end def

0 1 arguments 0 get tointeger
{
	fibonacci toname say
}
bind for
